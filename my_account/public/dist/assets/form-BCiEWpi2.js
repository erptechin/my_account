import{u as E,t as z,H as B,j as e,S as I,B as j,C as y}from"./index-ncicVzZt.js";import{u as P,o as A}from"./index.esm-CaKN566X.js";import{S as O,D as n}from"./dynamicForms-Xo_uG-5R.js";import{P as J}from"./Page-GDURQcbQ.js";import{u as R,b as U,c as H,d as L}from"./useApiHook-eP_9u3qF.js";import{F as T}from"./DocumentPlusIcon-S5nFJYeM.js";import"./popover-DTctezvM.js";import"./transition-Dmw7rjwb.js";import"./floating-ui.dom-CtcSe9Ld.js";import"./active-element-history-BaoVivUy.js";import"./frozen-Cr8m4JQ1.js";import"./XMarkIcon-BP9YgW7d.js";import"./Datepicker-Ce_LiJN5.js";import"./combobox-Dh6jFC9c.js";import"./index-Dy31tm5o.js";import"./iconBase-CISmb_qU.js";import"./useUnmount-CC7n5X-V.js";import"./useMutation-zCcxsaHQ.js";const l="Charge Entry",c=["document_type","offense_date","filed_date","citation_number","time_of_violation_24_hrss","custom_aa"],d=["violator_first_name","violator_middle_name","violator_last_name","defendant_suffix","street_address","street_address_line_2","vl_city","vl_state","zipcode_5","zipcode_4","vl_country","vl_mobile_no","email","social_security_number","dob","violator_age","race","defendant_gender","defendant_ethnicity","hair_color","height","eye_color","legacy_race"],m=["driving_licence_no","dl_state","dl_class","is_licence_cdl"],_=["make_year","vehicle_make","commercial","model","colour","licence_number","license_plate_state","vehicle_registration_year","vin"],f=["inc_location_type","inc_street_address","inc_street_address_line_2","on_city","inc_state","inc_zip4","offence_code","witness_table"],p=["notes"],h=["is_the_defendant_out_on_bond","bond_type","bond_amount","bonding_company_agent","bonding_insurance_company_name","bond_number","was_bond_forfeitured_"],V={offence_code:{violation_code:!0,docet:!0,violation_codes:!0,description:!0},witness_table:{offence_code:!0,name1:!0,docket:!0}},q=Object.fromEntries([...c,...d,...m,..._,...f,...p,...h].map(x=>[x,""]));function ce(){const{isDark:x,darkColorScheme:v,lightColorScheme:b}=E(),u=z(),{id:o}=B(),{data:s,isFetching:N}=R({doctype:l,fields:JSON.stringify([...c,...d,...m,..._,...f,...p,...h])}),{data:S,isFetching:w}=U({doctype:l,id:o,fields:JSON.stringify([...c,...d,...m,..._,...f,...p,...h])}),D=H(r=>{r&&(g(),u(-1))}),F=L(r=>{r&&(g(),u(-1))}),{register:t,handleSubmit:k,formState:{errors:i},control:a,reset:g}=P({resolver:A(O(s==null?void 0:s.fields)),values:o?S:q}),C=r=>{o?F.mutate({doctype:l,body:{...r,id:o}}):D.mutate({doctype:l,body:r})};return N||w?e.jsx(I,{style:{"--sk-color":x?v[700]:b[300]}}):e.jsx(J,{title:(o?"Edit ":"New ")+l,children:e.jsxs("div",{className:"transition-content px-(--margin-x) pb-6",children:[e.jsxs("div",{className:"flex flex-col items-center justify-between space-y-4 py-5 sm:flex-row sm:space-y-0 lg:py-6",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(T,{className:"size-6"}),e.jsxs("h2",{className:"line-clamp-1 text-xl font-medium text-gray-700 dark:text-dark-50",children:[o?"Edit":"New"," ",l]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{className:"min-w-[7rem]",variant:"outlined",color:"error",onClick:()=>u(-1),children:"Back"}),e.jsx(j,{className:"min-w-[7rem]",color:"primary",type:"submit",form:"new-post-form",children:"Save"})]})]}),e.jsx("form",{autoComplete:"off",onSubmit:k(C),id:"new-post-form",children:e.jsxs("div",{className:"grid grid-cols-12 place-content-start gap-4 sm:gap-5 lg:gap-6",children:[e.jsx("div",{className:"col-span-12 lg:col-span-8",children:e.jsx(y,{className:"p-4 sm:px-5",children:e.jsxs("div",{className:"mt-5 space-y-5",children:[e.jsx(n,{infos:s==null?void 0:s.fields,fields:c,register:t,control:a,errors:i}),e.jsx("h3",{children:e.jsx("strong",{children:"Defendant Personal Details"})}),e.jsx(n,{infos:s==null?void 0:s.fields,fields:d,register:t,control:a,errors:i}),e.jsx("h3",{children:e.jsx("strong",{children:"Driver License Info"})}),e.jsx(n,{infos:s==null?void 0:s.fields,fields:m,register:t,control:a,errors:i}),e.jsx("h3",{children:e.jsx("strong",{children:"Vehicle Details"})}),e.jsx(n,{infos:s==null?void 0:s.fields,fields:_,register:t,control:a,errors:i}),e.jsx("h3",{children:e.jsx("strong",{children:"Incident Details"})}),e.jsx(n,{infos:s==null?void 0:s.fields,fields:f,tables:V,register:t,control:a,errors:i}),e.jsx("h3",{children:e.jsx("strong",{children:"Notes"})}),e.jsx(n,{infos:s==null?void 0:s.fields,fields:p,register:t,control:a,errors:i})]})})}),e.jsx("div",{className:"col-span-12 space-y-4 sm:space-y-5 lg:col-span-4 lg:space-y-6",children:e.jsxs(y,{className:"space-y-5 p-4 sm:px-5",children:[e.jsx("h3",{children:e.jsx("strong",{children:"Bond Details"})}),e.jsx(n,{infos:s==null?void 0:s.fields,fields:h,register:t,control:a,errors:i})]})})]})})]})})}export{ce as default};
