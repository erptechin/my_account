import{u as v,t as F,H as w,j as e,S as k,B as l}from"./index-CPWBPoXl.js";import{u as D,o as C}from"./index.esm-Djw7k6S_.js";import{S as E,D as _}from"./dynamicForms-qGMD7o4v.js";import{P as A}from"./Page-DMgJU0dl.js";import{u as B,b as O,c as P,d as I}from"./useApiHook-D2XK52Gu.js";import{F as J}from"./DocumentPlusIcon-BJ57DI0L.js";import"./popover-C0WR_Ddu.js";import"./transition-BIXJA3XV.js";import"./floating-ui.dom-CtcSe9Ld.js";import"./active-element-history-CQ6slfHd.js";import"./frozen-11YDVc-l.js";import"./XMarkIcon-BAj3DpYW.js";import"./Datepicker-U5jpfmHQ.js";import"./combobox-BFONwAh0.js";import"./index-kqgHF6uO.js";import"./iconBase-DQLywbaQ.js";import"./useUnmount-ZXEXCrvr.js";import"./useMutation-CP3rL8_3.js";const o="Agency",n=["agency_name","agency_code","type"],r=["por_category","omv_issuing_agency"],R=Object.fromEntries([...n,...r].map(a=>[a,""]));function se(){const{isDark:a,darkColorScheme:d,lightColorScheme:p}=v(),m=F(),{id:t}=w(),{data:s,isFetching:f}=B({doctype:o,fields:JSON.stringify([...n,...r])}),{data:u,isFetching:x}=O({doctype:o,id:t,fields:JSON.stringify([...n,...r])}),g=P(i=>{i&&(c(),m(-1))}),h=I(i=>{i&&(c(),m(-1))}),{register:y,handleSubmit:j,formState:{errors:S},control:N,reset:c}=D({resolver:C(E(s==null?void 0:s.fields)),values:t?u:R}),b=i=>{t?h.mutate({doctype:o,body:{...i,id:t}}):g.mutate({doctype:o,body:i})};return f||x?e.jsx(k,{style:{"--sk-color":a?d[700]:p[300]}}):e.jsx(A,{title:(t?"Edit ":"New ")+o,children:e.jsxs("div",{className:"transition-content px-(--margin-x) pb-6",children:[e.jsxs("div",{className:"flex flex-col items-center justify-between space-y-4 py-5 sm:flex-row sm:space-y-0 lg:py-6",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"size-6"}),e.jsxs("h2",{className:"line-clamp-1 text-xl font-medium text-gray-700 dark:text-dark-50",children:[t?"Edit":"New"," ",o]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{className:"min-w-[7rem]",variant:"outlined",color:"error",onClick:()=>m(-1),children:"Back"}),e.jsx(l,{className:"min-w-[7rem]",color:"primary",type:"submit",form:"new-post-form",children:"Save"})]})]}),e.jsx("form",{autoComplete:"off",onSubmit:j(b),id:"new-post-form",children:e.jsx(_,{infos:s==null?void 0:s.fields,fields:r,register:y,control:N,errors:S})})]})})}export{se as default};
