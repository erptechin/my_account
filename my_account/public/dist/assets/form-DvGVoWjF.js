import{u as w,t as D,H as E,a as n,j as t,S as C,B as q}from"./index-CPWBPoXl.js";import{u as z,o as A}from"./index.esm-Djw7k6S_.js";import{S as B,D as I}from"./dynamicForms-qGMD7o4v.js";import{P as O}from"./Page-DMgJU0dl.js";import{u as P,b as J,c as R,d as U}from"./useApiHook-D2XK52Gu.js";import{F as H}from"./DocumentPlusIcon-BJ57DI0L.js";import"./popover-C0WR_Ddu.js";import"./transition-BIXJA3XV.js";import"./floating-ui.dom-CtcSe9Ld.js";import"./active-element-history-CQ6slfHd.js";import"./frozen-11YDVc-l.js";import"./XMarkIcon-BAj3DpYW.js";import"./Datepicker-U5jpfmHQ.js";import"./combobox-BFONwAh0.js";import"./index-kqgHF6uO.js";import"./iconBase-DQLywbaQ.js";import"./useUnmount-ZXEXCrvr.js";import"./useMutation-CP3rL8_3.js";const l="Case",i="Docket",T=["section_break_n4h60","section_break_wbii","section_break_3gpim","section_break_qwmbq","bond_details_section","section_break_7h1go","get_hearing_at_glance","column_break_z8a1a","column_break_qewps","column_break_drnys","column_break_dmer3","column_break_tsesv","column_break_egal","column_break_eakzy"],G=["case_title","case_status","modified_date","full_name","dob","d_address","latest_hearing_date","hearing_time","offence_code","description","offense_date","citation_number","amended_charge","fine_amount","court_cost","contempt_fee","total_fine","balance_amount","bondamount","bond_number"];function me(){const{isDark:d,darkColorScheme:u,lightColorScheme:_}=w(),o=D(),{id:a}=E(),[m,f]=n.useState(null),[p,b]=n.useState({}),{data:e,isFetching:g}=P({doctype:i,fields:JSON.stringify([...T,...G])}),{data:x,isFetching:h}=J({doctype:i,id:a,fields:m?JSON.stringify(m):null});n.useEffect(()=>{if(e!=null&&e.fields){let s=e==null?void 0:e.fields.map(r=>r.fieldname);f(s),b(Object.fromEntries(s.map(r=>[r,""])))}},[e==null?void 0:e.fields]);const k=R(s=>{s&&(c(),o(-1))}),S=U(s=>{s&&(c(),o(-1))}),{register:j,handleSubmit:y,formState:{errors:N},control:F,reset:c}=z({resolver:A(B(e==null?void 0:e.fields)),values:a?x:p}),v=s=>{a?S.mutate({doctype:i,body:{...s,id:a}}):k.mutate({doctype:i,body:s})};return g||h?t.jsx(C,{style:{"--sk-color":d?u[700]:_[300]}}):t.jsx(O,{title:(a?"Edit ":"New ")+l,children:t.jsxs("div",{className:"transition-content px-(--margin-x) pb-6",children:[t.jsxs("div",{className:"flex flex-col items-center justify-between space-y-4 py-5 sm:flex-row sm:space-y-0 lg:py-6",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(H,{className:"size-6"}),t.jsxs("h2",{className:"line-clamp-1 text-xl font-medium text-gray-700 dark:text-dark-50",children:[a?"Edit":"New"," ",l]})]}),t.jsx("div",{className:"flex gap-2",children:t.jsx(q,{className:"min-w-[7rem]",variant:"outlined",color:"error",onClick:()=>o(-1),children:"Back"})})]}),t.jsx("form",{autoComplete:"off",onSubmit:y(v),id:"new-post-form",children:t.jsx(I,{infos:e==null?void 0:e.fields,register:j,control:F,errors:N})})]})})}export{me as default};
